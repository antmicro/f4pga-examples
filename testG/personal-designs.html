
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="_static/javascripts/modernizr.js"></script>
  
  
  
    <title>Building custom designs &#8212; F4PGA examples  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/material.css" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/tabs.js"></script>
    <link rel="shortcut icon" href="_static/favicon.svg"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Customizing the Makefiles" href="customizing-makefiles.html" />
    <link rel="prev" title="Running example designs" href="running-examples.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=indigo data-md-color-accent=blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#personal-designs" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="index.html" title="F4PGA examples  documentation"
           class="md-header-nav__button md-logo">
          
              <img src="_static/logo.svg" height="26"
                   alt="F4PGA examples documentation logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">F4PGA examples  documentation</span>
          <span class="md-header-nav__topic"> Building custom designs </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
      
  
  <script src="_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = ""versions.json"",
        target_loc = "../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">F4PGA examples  documentation</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="index.html" title="F4PGA examples documentation" class="md-nav__button md-logo">
      
        <img src="_static/logo.svg" alt=" logo" width="48" height="48">
      
    </a>
    <a href="index.html"
       title="F4PGA examples documentation">F4PGA examples  documentation</a>
  </label>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#personal-designs--page-root" class="md-nav__link">Building custom designs</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#preparing-your-design" class="md-nav__link">Preparing Your Design</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#hdl-files" class="md-nav__link">HDL Files</a>
        </li>
        <li class="md-nav__item"><a href="#constraint-file" class="md-nav__link">Constraint File</a>
        </li>
        <li class="md-nav__item"><a href="#makefile" class="md-nav__link">Makefile</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#building-your-personal-projects" class="md-nav__link">Building your personal projects</a>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="_sources/personal-designs.rst.txt">Show Source</a> </li>

<li id="searchbox" class="md-nav__item"></li>

  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="building-custom-designs">
<span id="id1"></span><h1 id="personal-designs--page-root">Building custom designs<a class="headerlink" href="#personal-designs--page-root" title="Permalink to this headline">¶</a></h1>
<p>This section describes how to compile and download your own designs to an FPGA using only
the F4PGA toolchain.</p>
<p>Before building any examples, you will need to first install the toolchain. To do this, follow the steps in <a class="reference internal" href="getting.html#getting"><span class="std std-ref">Getting F4PGA</span></a>.
After you have downloaded the toolchain, follow the steps in <a class="reference internal" href="building-examples.html#building-examples"><span class="std std-ref">Building example designs</span></a> by seting the installation
directory to match what you set it to earlier, assigning the path and source for your conda environment, and activating
your env.</p>
<section id="preparing-your-design">
<h2 id="preparing-your-design">Preparing Your Design<a class="headerlink" href="#preparing-your-design" title="Permalink to this headline">¶</a></h2>
<p>Building a design in F4PGA requires three parts: the HDL files for your design, a constraints
file, and a Makefile. For simplicity, all three of these design files should be moved to a single
directory. The location of the directory does not mater as long as the three design elements are all
within it.</p>
<section id="hdl-files">
<h3 id="hdl-files">HDL Files<a class="headerlink" href="#hdl-files" title="Permalink to this headline">¶</a></h3>
<p>F4PGA provides full support for Verilog. Some support for SystemVerilog HDL code is also
provided, although more complicated designs written in SystemVerilog may not build properly under
Yosys. Use whichever method you prefer, and add your design files to the directory of choice.
If you are using the provided Makefiles to build your design, the top level module in your HDL
code should be declared as <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">top</span> <span class="pre">(...</span></code>. Failure to do so will result in an error from
symbiflow_synth stating something similar to <code class="docutils literal notranslate"><span class="pre">ERROR:</span> <span class="pre">Module</span> <span class="pre">'top'</span> <span class="pre">not</span> <span class="pre">found!</span></code> If you are using
your own makefiles or commands, you can specify your top level module name using the -t flag in
<code class="docutils literal notranslate"><span class="pre">symbiflow_synth</span></code>.</p>
</section>
<section id="constraint-file">
<h3 id="constraint-file">Constraint File<a class="headerlink" href="#constraint-file" title="Permalink to this headline">¶</a></h3>
<p>The F4PGA toolchain supports both .XDC and .PCF+.SDC formats for constraints.
You can use XDC to define IOPAD, IOSETTINGS, and clock constraints. SDCs can be used to
define clock constraints and PCFs can be used to define IOPAD constraints only. Use whichever
method you prefer and add your constraint file(s) to your design directory.</p>
<p>Note that if you use an XDC file as your constraint and neglect to include your own SDC, the
toolchain will automatically generate one to provide clock constraints to VTR.</p>
</section>
<section id="makefile">
<h3 id="makefile">Makefile<a class="headerlink" href="#makefile" title="Permalink to this headline">¶</a></h3>
<p>Visit the <a class="reference external" href="customizing-makefiles.html">Customizing Makefiles</a> page to learn how to make a simple
Makefile for your designs. After following the directions listed there return to this page to
finish building your custom design.</p>
</section>
</section>
<section id="building-your-personal-projects">
<h2 id="building-your-personal-projects">Building your personal projects<a class="headerlink" href="#building-your-personal-projects" title="Permalink to this headline">¶</a></h2>
<p>Before you begin building your design, navigate to the directory where you have stored your
Makefile, HDL, and constraint files:</p>
<div class="highlight-bash notranslate" id="your-directory"><div class="highlight"><pre><span></span><span class="nb">cd</span> &lt;path to your directory&gt;
</pre></div>
</div>
<p>Then, depending on your board type run:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-QXJ0eV8zNVQ=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-QXJ0eV8zNVQ=" name="QXJ0eV8zNVQ=" role="tab" tabindex="0">Arty_35T</button><button aria-controls="panel-0-QXJ0eV8xMDBU" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-QXJ0eV8xMDBU" name="QXJ0eV8xMDBU" role="tab" tabindex="-1">Arty_100T</button><button aria-controls="panel-0-TmV4dXM0" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-TmV4dXM0" name="TmV4dXM0" role="tab" tabindex="-1">Nexus4</button><button aria-controls="panel-0-QmFzeXMz" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-QmFzeXMz" name="QmFzeXMz" role="tab" tabindex="-1">Basys3</button><button aria-controls="panel-0-TmV4eXMgVmlkZW8=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-TmV4eXMgVmlkZW8=" name="TmV4eXMgVmlkZW8=" role="tab" tabindex="-1">Nexys Video</button><button aria-controls="panel-0-WnlibyBaNw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-WnlibyBaNw==" name="WnlibyBaNw==" role="tab" tabindex="-1">Zybo Z7</button></div><div aria-labelledby="tab-0-QXJ0eV8zNVQ=" class="sphinx-tabs-panel group-tab" id="panel-0-QXJ0eV8zNVQ=" name="QXJ0eV8zNVQ=" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate" id="example-counter-a35t-group"><div class="highlight"><pre><span></span><span class="nv">TARGET</span><span class="o">=</span><span class="s2">"arty_35"</span> make -C .
</pre></div>
</div>
</div><div aria-labelledby="tab-0-QXJ0eV8xMDBU" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-QXJ0eV8xMDBU" name="QXJ0eV8xMDBU" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate" id="example-counter-a100t-group"><div class="highlight"><pre><span></span><span class="nv">TARGET</span><span class="o">=</span><span class="s2">"arty_100"</span> make -C .
</pre></div>
</div>
</div><div aria-labelledby="tab-0-TmV4dXM0" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-TmV4dXM0" name="TmV4dXM0" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate" id="example-counter-nexys4ddr-group"><div class="highlight"><pre><span></span><span class="nv">TARGET</span><span class="o">=</span><span class="s2">"nexys4ddr"</span> make -C .
</pre></div>
</div>
</div><div aria-labelledby="tab-0-QmFzeXMz" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-QmFzeXMz" name="QmFzeXMz" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate" id="example-counter-basys3-group"><div class="highlight"><pre><span></span><span class="nv">TARGET</span><span class="o">=</span><span class="s2">"basys3"</span> make -C .
</pre></div>
</div>
</div><div aria-labelledby="tab-0-TmV4eXMgVmlkZW8=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-TmV4eXMgVmlkZW8=" name="TmV4eXMgVmlkZW8=" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate" id="example-counter-nexys-video-group"><div class="highlight"><pre><span></span><span class="nv">TARGET</span><span class="o">=</span><span class="s2">"nexys_video"</span> make -C counter_test
</pre></div>
</div>
</div><div aria-labelledby="tab-0-WnlibyBaNw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-WnlibyBaNw==" name="WnlibyBaNw==" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate" id="example-counter-zybo-group"><div class="highlight"><pre><span></span><span class="nv">TARGET</span><span class="o">=</span><span class="s2">"zybo"</span> make -C counter_test
</pre></div>
</div>
</div></div>
<p>If your design builds without error, the bitstream can be found in the following location:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> build/&lt;board&gt;
</pre></div>
</div>
<p>Once you navigate to the directory containing the bitstream, use the following commands on the
<strong>Arty and Basys3</strong> to upload the design to your board. Make sure to change <code class="docutils literal notranslate"><span class="pre">top.bit</span></code> to the
name you used for your top level module:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>openFPGALoader -b arty_a7_35t top.bit
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Many of the commands needed to build a project are run multiple times with little to no
variation. You might consider adding a few aliases or even a few bash functions to your
.bashrc file to save yourself some typing or repeated copy/paste. For example, instead of
using the command used to upload the bitstream to Xilinx 7 series FPGA every time, you
could just add the following lines to your .bashrc file:</p>
<div class="highlight-bash notranslate" id="bash-functions"><div class="highlight"><pre><span></span> f4pga_bit<span class="o">()</span> <span class="o">{</span>
 <span class="c1">#Creates and downloads the bitstream to Xilinx 7 series FPGA:</span>
 openFPGALoader -b <span class="nv">$OFL_BOARD</span> top.bit
<span class="o">}</span>
</pre></div>
</div>
<p>Now whenever you need to download a bitstream to the Xilinx-7 series you can simply type
e.g. <code class="docutils literal notranslate"><span class="pre">OFL_BOARD=basys3</span> <span class="pre">f4pga_bit</span></code> into the terminal and hit enter.</p>
</div>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="running-examples.html" title="Running example designs"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Running example designs </span>
              </div>
            </a>
          
          
            <a href="customizing-makefiles.html" title="Customizing the Makefiles"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Customizing the Makefiles </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright F4PGA Authors, 2020 - 2022.
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>